<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Matrix Quest - Твой цифровой бункер" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    
    <!-- Снег CSS -->
    <link href="https://cdn.jsdelivr.net/gh/Alaev-Co/snowflakes/dist/snow.min.css" rel="stylesheet">
    
    <title>Matrix Quest</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- Снег JS -->
    <script src="https://cdn.jsdelivr.net/gh/Alaev-Co/snowflakes/dist/Snow.min.js"></script>
    <script>
      // Инициализация снега
      let snowInstance = null;
      
      function initSnow() {
        if (!snowInstance) {
          snowInstance = new Snow({
            countSnowflake: 150,
            iconColor: '#a6e7ff',
            iconSize: 20,
            snowBallIterations: 60,
            snowBallupNum: 2,
            showSnowBalls: true,
            showSnowBallsIsMobile: true,
          });
        }
      }
      
      // Глобальные функции управления снегом
      window.toggleSnow = function(enabled) {
        const snowBox = document.querySelector('.snowflakes-box');
        const ballBox = document.querySelector('.snowball-box');
        
        if (snowBox) {
          snowBox.style.display = enabled ? 'block' : 'none';
        }
        if (ballBox) {
          ballBox.style.display = enabled ? 'block' : 'none';
        }
      };
      
      // Инициализация при загрузке
      document.addEventListener('DOMContentLoaded', () => {
        initSnow();
        // Читаем сохранённое состояние
        const savedState = localStorage.getItem('show_snow');
        const enabled = savedState === null ? true : savedState === 'true';
        window.toggleSnow(enabled);
      });
    </script>
  </body>
</html>
